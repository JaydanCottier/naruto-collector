---
interface Props {
  pullRates: {
    ur_per_packs?: number;
    hit_per_packs?: number;
    valueRating?: number;
  } | null | undefined;
}

const { pullRates } = Astro.props;
const ur = pullRates?.ur_per_packs || 0;
const hit = pullRates?.hit_per_packs || 0;
const rating = pullRates?.valueRating || 0;

function stars(n: number) {
  return 'â˜…'.repeat(n) + 'â˜†'.repeat(5 - n);
}
---

{pullRates && (ur > 0 || rating > 0) && (
  <div class="bg-brand-surface rounded-xl border border-brand-border p-4">
    <h3 class="text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3">Pull Rates & Value</h3>
    <div class="flex flex-wrap gap-x-6 gap-y-2 items-center">
      {ur > 0 && (
        <div class="flex items-center gap-2">
          <span class="text-brand-gold text-lg">ðŸŽ´</span>
          <div>
            <div class="text-sm font-bold text-white">~1 UR per {ur} packs</div>
            <div class="text-[10px] text-brand-text-muted">Ultra Rare pull rate</div>
          </div>
        </div>
      )}
      {hit > 0 && (
        <div class="flex items-center gap-2">
          <span class="text-brand-orange text-lg">ðŸŽ¯</span>
          <div>
            <div class="text-sm font-bold text-white">Hit: 1 in {hit}</div>
            <div class="text-[10px] text-brand-text-muted">Any hit per packs</div>
          </div>
        </div>
      )}
      {rating > 0 && (
        <div class="flex items-center gap-2">
          <span class="text-brand-gold text-lg tracking-wider">{stars(rating)}</span>
          <div>
            <div class="text-[10px] text-brand-text-muted">Value Rating</div>
          </div>
        </div>
      )}
    </div>
  </div>
)}
